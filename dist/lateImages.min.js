!function(a){function e(t,e,s){a('<img src="'+t+'">').load(e).error(s)}function t(t,e){this.$el=a(t),this.options=a.extend({},a.lateImages.defaults,e),this.init()}a.extend(t.prototype,{init:function(){this.$el.whenInViewport(this.processImage,{context:this,threshold:this.options.threshold})},processImage:function(){var s=this.$el,t=this.options,l=s.attr(t.srcAttribute),i=s.attr(t.altAttribute),o=this;s.addClass(t.loadingClass),e(l,function(){!s.is("img")&&o.$el.replaceWith(s=a(new Image)),s.attr("src",l).removeClass(t.loadingClass).addClass(t.loadedClass),i&&s.attr("alt",i),t.doneCallback&&t.doneCallback(s)},function(){s.removeClass(t.loadingClass).addClass(t.errorClass),t.failCallback&&t.failCallback(s)})}}),a.lateImages=t,a.lateImages.defaults={srcAttribute:"data-src",altAttribute:"data-alt",doneCallback:null,failCallback:null,threshold:0,loadingClass:"lateImageLoading",loadedClass:"lateImageLoaded",errorClass:"lateImageError"},a.fn.lateImages=function(e){return this.each(function(){a.data(this,"lateImages")||a.data(this,"lateImages",new t(this,e))})}}(window.jQuery||window.Zepto);