!function(a){"function"==typeof define&&define.amd?define(["jquery","when-in-viewport"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery"),require("when-in-viewport")):a(jQuery)}(function(a){function b(a,b,c){var d=new Image;d.onload=b,d.onerror=c,d.src=a}function c(b,d){this.$el=a(b),this.options=a.extend({},c.defaults,d),this.init()}return a.extend(c.prototype,{init:function(){this.options.enableViewportCheck?this.$el.whenInViewport(this.processImage,{context:this,threshold:this.options.threshold}):this.processImage()},processImage:function(){this.options.beforeProcessImage&&this.options.beforeProcessImage(this.$el,this);var c=this.$el,d=this.options,e=c.attr(d.srcAttribute),f=c.attr(d.altAttribute),g=this;c.addClass(d.loadingClass),b(e,function(b){!c.is("img")&&g.$el.replaceWith(c=a(new Image)),c.attr("src",e).removeClass(d.loadingClass).addClass(d.loadedClass),f&&c.attr("alt",f),d.doneCallback&&d.doneCallback(c,b,g)},function(a){c.removeClass(d.loadingClass).addClass(d.errorClass),d.failCallback&&d.failCallback(c,a,g)})}}),c.defaults={srcAttribute:"data-src",altAttribute:"data-alt",beforeProcessImage:null,doneCallback:null,failCallback:null,threshold:0,loadingClass:"lateImageLoading",loadedClass:"lateImageLoaded",errorClass:"lateImageError",enableViewportCheck:!0},a.LateImages=a.lateImages=c,a.fn.lateImages=function(b){return this.each(function(){a.data(this,"lateImages")||a.data(this,"lateImages",new c(this,b))})},a});