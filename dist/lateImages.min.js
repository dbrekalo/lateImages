!function(a,b){"function"==typeof define&&define.amd?define(["when-in-viewport"],b):"object"==typeof module&&module.exports?module.exports=b(require("when-in-viewport")):a.LateImage=b(a.WhenInViewport)}(this,function(a){function b(d,f){this.el=d,f=e({},b.defaults,f,{context:this}),f.enableViewportCheck?this.inViewportListener=new a(d,function(){c(d,f)},{threshold:f.threshold}):c(d,f)}function c(a,b){var c=a.getAttribute(b.srcAttribute);b.loadingCallback&&b.loadingCallback(a,b.context),g(a,b.loadingClass),d(c,function(d){a.setAttribute("src",c),h(a,b.loadingClass),g(a,b.loadedClass),a.getAttribute(b.altAttribute)&&a.setAttribute("alt",a.getAttribute(b.altAttribute)),b.doneCallback&&b.doneCallback(a,d,b.context)},function(c){h(a,b.loadingClass),g(a,b.errorClass),b.failCallback&&b.failCallback(a,c,b.context)})}function d(a,b,c){var d=new Image;d.onload=b,d.onerror=c,d.src=a}function e(a){for(var b=1;b<arguments.length;b++)f(arguments[b],function(b,c){a[c]=b});return a}function f(a,b,c){if(a instanceof Array)for(var d=a.length,e=0;e<d;e++)b.call(c,a[e],e);else for(var f in a)a.hasOwnProperty(f)&&b.call(c,a[f],f)}function g(a,b){i(a,"add",b,function(b,c){c.indexOf(b)<0&&(c.push(b),a.className=c.join(" "))})}function h(a,b){i(a,"remove",b,function(b,c){var d=c.indexOf(b);d>=0&&(c.splice(d,1),a.className=c.join(" "))})}function i(a,c,d,e){f(j(d),function(d){b.useClassList&&a.classList?a.classList[c](d):e(d,j(a.className))})}function j(a){return j.trimRE=j.trimRE||/^\s+|\s+$/g,j.spacesRE=j.spacesRE||/\s\s+/g,a?a.replace(j.trimRE,"").replace(j.spacesRE," ").split(" "):[]}b.defaults={srcAttribute:"data-src",altAttribute:"data-alt",loadingCallback:null,doneCallback:null,failCallback:null,threshold:0,loadingClass:"lateImageLoading",loadedClass:"lateImageLoaded",errorClass:"lateImageError",enableViewportCheck:!0},b.prototype.destroy=function(){this.inViewportListener&&this.inViewportListener.stopListening()},b.registerAsJqueryPlugin=function(a){a.fn.lateImages=function(c){return this.each(function(){a.data(this,"lateImage")||a.data(this,"lateImage",new b(this,c))})}},b.useClassList=!0;var k=window.jQuery||window.$;return k&&b.registerAsJqueryPlugin(k),b});