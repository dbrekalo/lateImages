!function(a){function b(b,c,d){a('<img src="'+b+'">').load(c).error(d)}function c(b,c){this.$el=a(b),this.options=a.extend({},a.lateImages.defaults,c),this.init()}a.extend(c.prototype,{init:function(){this.options.enableViewportCheck?this.$el.whenInViewport(this.processImage,{context:this,threshold:this.options.threshold}):this.processImage()},processImage:function(){this.options.beforeProcessImage&&this.options.beforeProcessImage(this.$el,this);var c=this.$el,d=this.options,e=c.attr(d.srcAttribute),f=c.attr(d.altAttribute),g=this;c.addClass(d.loadingClass),b(e,function(){!c.is("img")&&g.$el.replaceWith(c=a(new Image)),c.attr("src",e).removeClass(d.loadingClass).addClass(d.loadedClass),f&&c.attr("alt",f),d.doneCallback&&d.doneCallback(c,g)},function(){c.removeClass(d.loadingClass).addClass(d.errorClass),d.failCallback&&d.failCallback(c,g)})}}),a.lateImages=c,a.lateImages.defaults={srcAttribute:"data-src",altAttribute:"data-alt",beforeProcessImage:null,doneCallback:null,failCallback:null,threshold:0,loadingClass:"lateImageLoading",loadedClass:"lateImageLoaded",errorClass:"lateImageError",enableViewportCheck:!0},a.fn.lateImages=function(b){return this.each(function(){a.data(this,"lateImages")||a.data(this,"lateImages",new c(this,b))})}}(window.jQuery||window.Zepto);